(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{24:function(e,t,n){e.exports=n(47)},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},41:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(18),u=n.n(c),i=(n(29),n(3)),s=n(4),l=n(5),m=n(6),p=n(23),h=(n(30),n(19)),f=(n(31),n(9)),g=n.n(f),v=n(11),d=function(){var e={"Content-Type":"application/json"},t=function(t){var n=t.url,a=t.body,r={method:t.method,headers:e};return a&&(r.body=JSON.stringify(a)),new Promise((function(e,t){fetch(n,r).then((function(n){var a=n.headers.get("content-type");return a&&-1!==a.indexOf("application/json")?n.json().then((function(t){console.log("json",t),e(t)})):n.text().then((function(e){console.log("text",e),t({error:e})}))}))}))};return{get:function(e){},post:function(){var e=Object(v.a)(g.a.mark((function e(n,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({url:n,body:a,method:"POST"}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),put:function(e,t){},del:function(e){}}},b=n(20),y=n.n(b)()("app:AuthService"),E=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"saveToken",value:function(e){localStorage.setItem("token","Bearer ".concat(e))}},{key:"clearToken",value:function(){localStorage.removeItem("token")}},{key:"isAuthorised",value:function(){var e=this.getToken();y("token is",e);var t=!!e;return y("check auth",t),t}},{key:"logout",value:function(){localStorage.removeItem("token"),a.push("/")}},{key:"attachHistory",value:function(e){a=e}},{key:"redirectToLogin",value:function(){a.push("/login")}}]),e}(),k=new E,j=function(e){var t=e.post;return{performLogin:function(e){return Object(v.a)(g.a.mark((function n(){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("/api/v1/user/login",e);case 2:return a=n.sent,k.saveToken(a.token),n.abrupt("return",a);case 5:case"end":return n.stop()}}),n)})))()}}},O=(n(41),n(8)),w=function(e){var t=e.appName;return o.a.createElement("div",{className:"navbar"},o.a.createElement(O.a,{to:"/"},o.a.createElement("img",{src:"nounse.png",className:"logo",alt:"logo"}),o.a.createElement("h1",null,t)))},N=j(d()),S=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={username:"",password:""},a}return Object(s.a)(n,[{key:"handleChange",value:function(e){console.log(this.state),this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),N.performLogin(this.state).then((function(e){t.props.history.push("/")})),console.log(this.state)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"page--unprotected"},o.a.createElement(w,{appName:"Nounse"}),o.a.createElement("div",{className:"Login"},o.a.createElement("h3",null,"Login"),o.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("input",{type:"text",value:this.state.username,onChange:function(t){return e.handleChange(t)},placeholder:"Username \\ Email",name:"username"}),o.a.createElement("input",{type:"text",value:this.state.password,onChange:function(t){return e.handleChange(t)},placeholder:"Password",name:"password"}),o.a.createElement("input",{type:"submit",value:"Login"}))))}}]),n}(r.Component),x=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"page--unprotected"},o.a.createElement(w,{appName:"Nounse"}),"Timeline goes here")}}]),n}(r.Component),C=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("img",{alt:"Nounse",src:"nounse.png",width:"400px"}),o.a.createElement("h1",{className:"title"},"Nounse"),o.a.createElement("h2",{className:"subtitle"},"Microblogging redefined"),o.a.createElement(O.a,{class:"button--green",to:"/login"},"Login"),o.a.createElement(O.a,{class:"button--grey",to:"/register"},"Register"))}}]),n}(r.Component),T=n(7),L=n(1),I=Object(L.a)(),A=new E;function B(e){var t=e.component,n=Object(p.a)(e,["component"]);return o.a.createElement(T.b,Object.assign({},n,{render:function(e){return function(e,n){return e?o.a.createElement(t,n):o.a.createElement(T.a,{to:{pathname:"/login",state:{from:n.location}}})}(A.isAuthorised(),e)}}))}A.attachHistory(I);var J=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement(T.c,{history:I},o.a.createElement("div",{className:"App"},o.a.createElement(B,{path:"/",exact:!0,component:x}),o.a.createElement(T.b,{path:"/login",component:S}),o.a.createElement(T.b,{path:"/start",component:C})))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.35146808.chunk.js.map